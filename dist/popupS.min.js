/*! popups 1.1.3 - MIT | https://github.com/ChiefORZ/popupS.git */

!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.popupS=e()}(this,function(){"use strict";var s=!1,i=[],a=new RegExp(/([^\/\\]+)\.(jpg|jpeg|png|gif)$/i),n={additionalBaseClass:"",additionalButtonHolderClass:"",additionalButtonOkClass:"",additionalButtonCancelClass:"",additionalCloseBtnClass:"",additionalFormClass:"",additionalOverlayClass:"",additionalPopupClass:"",appendLocation:document.body||document.documentElement,baseClassName:"popupS",closeBtn:"&times;",flagBodyScroll:!1,flagButtonReverse:!1,flagCloseByEsc:!0,flagCloseByOverlay:!0,flagShowCloseBtn:!0,labelOk:"OK",labelCancel:"Cancel",loader:"spinner",zIndex:1e4},l=function(){var t,e,o=!1,n=document.createElement("fakeelement"),s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(t in s)if(s.hasOwnProperty(t)&&void 0!==n.style[t]){e=s[t],o=!0;break}return{type:e,supported:o}}();function t(){}function r(t,e){var o=[].slice.call(arguments,2);return e.bind?e.bind.apply(e,[t].concat(o)):function(){return e.apply(t,o.concat([].slice.call(arguments)))}}function c(t,e){if(t)for(var o in t)t.hasOwnProperty(o)&&e(t[o],o,t)}function p(t){t=t||{};for(var e=1;e<arguments.length;e++)if(arguments[e])for(var o in arguments[e])arguments[e].hasOwnProperty(o)&&(t[o]=arguments[e][o]);return t}function d(t,e,o){"function"==typeof t.addEventListener?t.addEventListener(e,o,!1):t.attachEvent&&t.attachEvent("on"+e,o)}function h(t,e,o){"function"==typeof t.removeEventListener?t.removeEventListener(e,o,!1):t.detachEvent&&t.detachEvent("on"+e,o)}function u(t,e,o){if(t&&t.style&&e)if(e instanceof Object)for(var n in e)u(t,n,e[n]);else t.style[e]=o}t.prototype={constructor:t,_open:function(o){if("string"!=typeof o.mode)throw new Error("mode must be a string");if(void 0!==o.title&&"string"!=typeof o.title)throw new Error("title must be a string");if(void 0!==o.placeholder&&"string"!=typeof o.placeholder)throw new Error("placeholder must be a string");for(var t in this.options=o=p({},o),n)!(t in o)&&(o[t]=n[t]);for(var e in c(["additionalBaseClass","additionalButtonHolderClass","additionalButtonOkClass","additionalButtonCancelClass","additionalCloseBtnClass","additionalFormClass","additionalOverlayClass","additionalPopupClass"],function(t){var e=o[t].split(" ").join(".");o[t]="."+e}),this)"_"===e.charAt(0)&&(this[e]=r(this,this[e]));if(this._init(),!0===o.force)for(;0<i.length;)i.pop();i.push(o),s&&!0!==o.force||this._create()},_init:function(){this.$layerEl&&this.$layerEl.style.opacity&&(this.$layerEl.style.opacity=""),this.$wrapEl||(this.$wrapEl=m({tag:"div."+this.options.baseClassName+"-base"+(this.options.additionalBaseClass?this.options.additionalBaseClass:""),css:{top:0,left:0,right:0,bottom:0,position:"fixed",textAlign:"center",overflowX:"auto",overflowY:"auto",outline:0,whiteSpace:"nowrap",zIndex:this.options.zIndex},children:{css:{height:"100%",display:"inline-block",verticalAlign:"middle"}}}),v(this.$wrapEl,this._getOverlay()),v(this.$wrapEl,this._getLayer()))},_getOverlay:function(){return this.$overlayEl||(this.$overlayEl=m({tag:"#popupS-overlay."+this.options.baseClassName+"-overlay"+(this.options.additionalOverlayClass?this.options.additionalOverlayClass:""),css:{top:0,right:0,bottom:0,left:0,position:"fixed",overflowX:"hidden",userSelect:"none",webkitUserSelect:"none",MozUserSelect:"none"}})),this.$overlayEl.setAttribute("unselectable","on"),this.$overlayEl},_getLayer:function(){return this.$layerEl||(this.$layerEl=m({css:{display:"inline-block",position:"relative",textAlign:"left",whiteSpace:"normal",verticalAlign:"middle",maxWidth:"100%",overflowX:"hidden",transform:"translate3d(0,0,0)"},children:{tag:"."+this.options.baseClassName+"-layer"+(this.options.additionalPopupClass?this.options.additionalPopupClass:"")}})),this.$layerEl},_resetLayer:function(){this.$layerEl.childNodes[0].innerHTML=""},_create:function(){var e=this,t=i[0],o=t.mode;s=!0,"modal-ajax"!=o?this._createPopup(t):this._loadContents(t);var n=function(t){t.stopPropagation(),_unbind(e.$layerEl,l.type,n)};l.supported&&r(e.$layerEl,l.type,n)},_createPopup:function(t){var e,o,n,s=t.mode,i=t.title,a=t.content,l=t.className?"."+t.className:"",r=a instanceof Object;this.callbacks={onOpen:t.onOpen,onSubmit:t.onSubmit,onClose:t.onClose},e={tag:"button#popupS-button-ok."+this.options.baseClassName+"-button-ok"+(this.options.additionalButtonOkClass?this.options.additionalButtonOkClass:""),text:this.options.labelOk},o={tag:"button#popupS-button-cancel."+this.options.baseClassName+"-button-ok"+(this.options.additionalButtonCancelClass?this.options.additionalButtonCancelClass:""),text:this.options.labelCancel},n=[{html:a},"modal"!=s&&"modal-ajax"!=s&&"prompt"==s&&{tag:"form."+this.options.baseClassName+"-form"+(this.options.additionalFormClass?this.options.additionalFormClass:""),children:[t.placeholder&&{tag:"label",htmlFor:"popupS-input",text:t.placeholder},{tag:"input#popupS-input",type:"text"}]},"modal"!=s&&"modal-ajax"!=s&&{tag:"nav."+this.options.baseClassName+"-buttons"+(this.options.additionalButtonHolderClass?this.options.additionalButtonHolderClass:""),children:"prompt"==s||"confirm"==s?this.options.flagButtonReverse?[e,o]:[o,e]:[e]}],a=m({children:[{tag:"a#popupS-resetFocusBack."+this.options.baseClassName+"-resetFocus",href:"#",text:"Reset Focus"},this.options.flagShowCloseBtn&&{tag:"span#popupS-close."+this.options.baseClassName+"-close"+(this.options.additionalCloseBtnClass?this.options.additionalCloseBtnClass:""),html:this.options.closeBtn},i&&{tag:"h5."+this.options.baseClassName+"-title"+l,text:i},{tag:"."+this.options.baseClassName+"-content"+l,children:r&&a||n},{tag:"a#popupS-resetFocus."+this.options.baseClassName+"-resetFocus",href:"#",text:"Reset Focus"}]}),this._resetLayer(),v(this.$layerEl.childNodes[0],a),this._appendPopup(),this.$contentEl=this.$layerEl.getElementsByClassName(this.options.baseClassName+"-content")[0],this.$btnReset=document.getElementById("popupS-resetFocus"),this.$btnResetBack=document.getElementById("popupS-resetFocusBack"),d(this.$btnReset,"focus",this._resetEvent),d(this.$btnResetBack,"focus",this._resetEvent),y(this.$layerEl),this.$btnOK=document.getElementById("popupS-button-ok")||void 0,this.$btnCancel=document.getElementById("popupS-button-cancel")||void 0,this.$input=document.getElementById("popupS-input")||void 0,void 0!==this.$btnOK&&d(this.$btnOK,"click",this._okEvent),void 0!==this.$btnCancel&&d(this.$btnCancel,"click",this._cancelEvent),this.options.flagShowCloseBtn&&d(document.getElementById("popupS-close"),"click",this._cancelEvent),this.options.flagCloseByOverlay&&d(this.$overlayEl,"click",this._cancelEvent),this.options.flagCloseByEsc&&d(document.body,"keyup",this._keyEvent),"function"==typeof this.callbacks.onOpen&&this.callbacks.onOpen.call(this)},_appendPopup:function(){this.$targetEl=this.options.appendLocation,v(this.$targetEl,this.$wrapEl),this.$targetEl===(document.body||document.documentElement)&&!1===this.options.flagBodyScroll&&u(this.$targetEl,{overflow:"hidden"}),window.getComputedStyle&&window.getComputedStyle(this.$wrapEl,null).height;var t=function(t){return new RegExp("(|\\s+)"+t+"(\\s+|$)")};t(" "+this.options.baseClassName+"-open").test(this.$wrapEl.className)||(this.$wrapEl.className+=" "+this.options.baseClassName+"-open"),t(" "+this.options.baseClassName+"-open").test(this.$layerEl.childNodes[0].className)||(this.$layerEl.childNodes[0].className+=" "+this.options.baseClassName+"-open")},_hide:function(){var e=this;if(i.splice(0,1),0<i.length)this._create();else{s=!1;var o=function(){var t;(t=e.$wrapEl)&&t.parentNode&&t.parentNode.removeChild(t),e.$targetEl===(document.body||document.documentElement)&&!1===e.options.flagBodyScroll&&(e.$targetEl.style.removeProperty?e.$targetEl.style.removeProperty("overflow"):e.$targetEl.style.removeAttribute("overflow"))},n=function(t){t.stopPropagation(),h(e.$wrapEl,l.type,n),o()};this.$wrapEl.className=this.$wrapEl.className.replace(" "+this.options.baseClassName+"-open",""),l.supported?d(e.$wrapEl,l.type,n):o(),this.$layerEl.childNodes[0].className=this.$layerEl.childNodes[0].className.replace(" "+this.options.baseClassName+"-open",""),l.supported&&d(e.$layerEl,l.type,function(t){t.stopPropagation(),h(e.$layerEl,l.type,n)})}},_loading:function(t){this.$loadingEl=m({tag:"div."+this.options.baseClassName+"-loading."+this.options.loader}),t?(this._resetLayer(),u(this.$layerEl.childNodes[0],{height:"60px",width:"60px",borderRadius:"30px"}),v(this.$layerEl.childNodes[0],this.$loadingEl),this._appendPopup()):u(this.$layerEl.childNodes[0],{height:null,width:null,borderRadius:null})},_loadContents:function(o){var t=o.ajax.url,e=void 0!==o.ajax.str?o.ajax.str:"",n=void 0===o.ajax.post||o.ajax.post,s=this;if(t.match(a)){var i=m({children:{tag:"img",src:t}});this._loading(!0),this._preLoadImage(i,function(){s._loading(!1),o.content=i,s._createPopup(o)})}else this._ajax(t,e,n,function(t){var e=m({html:this});s._preLoadImage(e,function(){s._loading(!1),o.content=e,s._createPopup(o)})},function(){s._loading(!0)})},_preLoadImage:function(t,e){for(var o,n=g(t,"img"),s=n.length,i=s;s--;)(o=n[s]).complete?i--:(d(o,"load",a),d(o,"error",a));if(i){var a=function(){if(0<=--i){for(s=n.length;s--;)h(o=n[s],"load",a),h(o,"error",a);e()}};a()}else e()},_ajax:function(t,e,o,n,s){var i;if(window.XMLHttpRequest)i=new XMLHttpRequest;else if(ActiveXObject("Microsoft.XMLHTTP"))i=new ActiveXObject("Microsoft.XMLHTTP");else{if(!ActiveXObject("Msxml2.XMLHTTP"))return alert("Error: Your browser does not support AJAX."),!1;i=new ActiveXObject("Msxml2.XMLHTTP")}return i.onreadystatechange=function(){4==i.readyState&&200==i.status&&n&&n.call(i.responseText)},!1===o?(i.open("GET",t+e,!0),i.send(null)):(i.open("POST",t,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(e)),s&&s.call(),i},_okEvent:function(t){void 0!==t.preventDefault&&t.preventDefault(),"function"==typeof this.callbacks.onSubmit&&(void 0!==this.$input?this.callbacks.onSubmit.call(this,this.$input.value):this.callbacks.onSubmit.call(this)),this._commonEvent()},_cancelEvent:function(t){void 0!==t.preventDefault&&t.preventDefault(),"function"==typeof this.callbacks.onClose&&this.callbacks.onClose.call(this),this._commonEvent()},_commonEvent:function(){void 0!==this.$btnOK&&h(this.$btnOK,"click",this._okEvent),void 0!==this.$btnCancel&&h(this.$btnCancel,"click",this._cancelEvent),this.options.flagShowCloseBtn&&h(document.getElementById("popupS-close"),"click",this._cancelEvent),this.options.flagCloseByOverlay&&h(this.$overlayEl,"click",this._cancelEvent),this.options.flagCloseByEsc&&h(document.body,"keyup",this._keyEvent),this._hide()},_resetEvent:function(t){y(this.$layerEl)},_keyEvent:function(t){var e=t.keyCode;void 0!==this.$input&&13===e&&this._okEvent(t),27===e&&this._cancelEvent(t)}};var f=/^(\w+)?(#[\w_-]+)?((?:\.[\w_-]+)*)/i;function m(t){var n,e;null===t&&(t="div"),"string"==typeof t&&(t={tag:t});var o=document.createDocumentFragment(),s=t.children,i=f.exec(t.tag||"");return delete t.children,t.tag=i[1]||"div",t.id=t.id||(i[2]||"").substr(1),(e=(i[3]||"").split("."))[0]=t.className||"",t.className=e.join(" "),v(o,n=document.createElement(t.tag)),delete t.tag,c(t,function(e,o){if("css"===o)u(n,t.css);else if("text"===o)null!==e&&v(n,document.createTextNode(e));else if("html"===o)null!==e&&(n.innerHTML=e);else if(o in n)try{n[o]=e}catch(t){n.setAttribute(o,e)}else/^data-/.test(o)&&n.setAttribute(o,e)}),s&&s.appendChild?v(n,s):s&&(s instanceof Array?c(s,function(t,e){t instanceof Object&&v(n,m(t))}):s instanceof Object&&v(n,m(s))),n}function v(t,e){try{t&&e&&t.appendChild(e)}catch(t){}}function y(t){for(var e,o,n=g(t,"input"),s=0,i=n.length;s<i;s++)if("submit"===(e=n[s]).type)!o&&(o=e);else if(!/hidden|check|radio/.test(e.type)&&""===e.value){o=e;break}o||(o=g(t,"button")[0]);try{o.focus()}catch(t){}}function g(t,e){return t.getElementsByTagName(e)}var e=new t;return e.window=function(t){this._open(t)},e.alert=function(t){t=p(t,{mode:"alert"}),this._open(t)},e.confirm=function(t){t=p(t,{mode:"confirm"}),this._open(t)},e.prompt=function(t){t=p(t,{mode:"prompt"}),this._open(t)},e.modal=function(t){t=p(t,{mode:"modal"}),this._open(t)},e.ajax=function(t){t=p(t,{mode:"modal-ajax"}),this._open(t)},e});